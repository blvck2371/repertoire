# Valeurs pour l'environnement production
environment: prod

imageRegistry: "repertoire-harbor.duckdns.org/prod"
imagePullSecrets: [harbor-creds]

ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: repertoire-prod.duckdns.org
  tls:
    - secretName: repertoire-tls
      hosts:
        - repertoire-prod.duckdns.org

backend:
  replicaCount: 2
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "1000m"
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70

frontend:
  replicaCount: 2
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "500m"
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
  # Ressources alignées sur preprod pour éviter Pending (cluster partagé dev+preprod+prod)

mongodb:
  replicaCount: 1
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  # emptyDir : pas de PVC = pas de blocage scheduling (cluster sans StorageClass ou capacité limitée)
  persistence:
    enabled: false
